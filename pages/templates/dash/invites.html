{% extends 'core/base.html' %}

{% set active_page = "dash" %}

{% block head %}
	<link rel="stylesheet" href="{{ url_for('static', filename='styles/' + active_page + '.css') + '?v=' + version }}">
{% endblock %}

{% block content %}
	<div class="container">
		<p>
			Welcome, {{username}}.
		</p>
		<div class="invites-header">
			<p>
				Your created invites:
			</p>
			{% if can_create == True %}
				<button type="submit" id="create-invite" class="create-invite">[Create]</button>
				<table class="create-table" id="create-invite-table" style="display: none;">
					<tr>
						<td>
							<input placeholder="Alias (Optional)" type="text" class="file-browser__create-directory" name="invite-name" id="invite-alias">
						</td>
						<td width="68px">
							<div class="table__buttons">
								<button class="action-button" id="approve-invite">
									<svg viewBox="0 0 24 24" >
										<g id="icons">
											<path d="M10,18c-0.5,0-1-0.2-1.4-0.6l-4-4c-0.8-0.8-0.8-2,0-2.8c0.8-0.8,2.1-0.8,2.8,0l2.6,2.6l6.6-6.6   c0.8-0.8,2-0.8,2.8,0c0.8,0.8,0.8,2,0,2.8l-8,8C11,17.8,10.5,18,10,18z" fill="currentColor"/>
										</g>
									</svg>
								</button>
								<button class="action-button" id="deny-invite">
									<svg viewBox="0 0 24 24">
										<g id="icons">
											<path d="M14.8,12l3.6-3.6c0.8-0.8,0.8-2,0-2.8c-0.8-0.8-2-0.8-2.8,0L12,9.2L8.4,5.6c-0.8-0.8-2-0.8-2.8,0   c-0.8,0.8-0.8,2,0,2.8L9.2,12l-3.6,3.6c-0.8,0.8-0.8,2,0,2.8C6,18.8,6.5,19,7,19s1-0.2,1.4-0.6l3.6-3.6l3.6,3.6   C16,18.8,16.5,19,17,19s1-0.2,1.4-0.6c0.8-0.8,0.8-2,0-2.8L14.8,12z" fill="currentColor"/>
										</g>
									</svg>
								</button>
							</div>
						</td>
					</tr>
				</table>
			{% endif %}
		</div>
		<div class="notifications" id="notifications"></div>
		<div class="links">
			<table class="links__table">
				<tr>
					<th>Expires</th>
					<th>Code</th>
					<th>Used by</th>
					{% if can_delete == True %}
						<th></th>
					{% endif %}
				</tr>
		        {% for invite in invites %}
					<tr>
						<td>{{invite.expires}}</td>
						<td>{{invite.code}}</td>
						<td>{{invite.used_by.username}}</td>
						{% if can_delete == True %}
							<td width="38px">
								<button class="delete-item" data-invitename="{{ invite.code }}">
									<svg viewBox="0 0 24 24">
										<g id="icons">
											<path d="M14.8,12l3.6-3.6c0.8-0.8,0.8-2,0-2.8c-0.8-0.8-2-0.8-2.8,0L12,9.2L8.4,5.6c-0.8-0.8-2-0.8-2.8,0   c-0.8,0.8-0.8,2,0,2.8L9.2,12l-3.6,3.6c-0.8,0.8-0.8,2,0,2.8C6,18.8,6.5,19,7,19s1-0.2,1.4-0.6l3.6-3.6l3.6,3.6   C16,18.8,16.5,19,17,19s1-0.2,1.4-0.6c0.8-0.8,0.8-2,0-2.8L14.8,12z" fill="currentColor" id="exit"/>
										</g>
									</svg>
								</button>
							</td>
						{% endif %}
					</tr>
		        {% else %}
					<tr>
						<td colspan="3" class="links__not-found">No items found.</td>
					</tr>
		        {% endfor %}
			</table>
	    </div>
	</div>

	{% if can_delete == True %}
		<script src="{{ url_for('static', filename='scripts/invites.js') + '?v=' + version }}"></script>
	{% endif %}
{% endblock %}
